# å¯¼å…¥æˆ‘ä»¬éœ€è¦çš„ã€æ­£ç¡®çš„åº“
from mnemonic import Mnemonic
from bip_utils import (
    Bip39SeedGenerator, Bip44, Bip44Coins, Bip44Changes
)
import time

# --- æ‚¨éœ€è¦åœ¨è¿™é‡Œè®¾ç½®ä¸¤ç§å¸çš„é“å·è§„åˆ™ ---
# è§„åˆ™è¶Šç®€å•ï¼Œæ‰¾åˆ°çš„å¯èƒ½æ€§æ‰è¶Šå¤§ï¼å»ºè®®2-3ä½ã€‚
ETH_PREFIX_TO_FIND = "777"  # ä»¥å¤ªåŠåœ°å€ä»¥ 0x... å¼€å¤´
TRON_PREFIX_TO_FIND = "TSS" # æ³¢åœºåœ°å€ä»¥ T... å¼€å¤´
# ------------------------------------

# åˆå§‹åŒ–åŠ©è®°è¯ç”Ÿæˆå™¨
mnemo = Mnemonic("english")

# å‡†å¤‡å¥½è¦åŒ¹é…çš„å®Œæ•´å‰ç¼€
eth_vanity_prefix = "0x" + ETH_PREFIX_TO_FIND.lower()
# æ³¢åœºåœ°å€åŒºåˆ†å¤§å°å†™ï¼Œæ‰€ä»¥æˆ‘ä»¬ç›´æ¥ç”¨è®¾å®šçš„å‰ç¼€
tron_vanity_prefix = TRON_PREFIX_TO_FIND

print("æ­£åœ¨åŠªåŠ›å¯»æ‰¾èƒ½åŒæ—¶æ»¡è¶³ ETH å’Œ TRON çš„é“å·åŠ©è®°è¯...")
print(f"ETH è§„åˆ™: åœ°å€ä»¥ '{eth_vanity_prefix}' å¼€å¤´")
print(f"TRON è§„åˆ™: åœ°å€ä»¥ '{tron_vanity_prefix}' å¼€å¤´")
print("æ‰¾åˆ°åä¼šè‡ªåŠ¨åœæ­¢ã€‚è¿™ä¼šéå¸¸éå¸¸æ…¢ï¼Œè¯·æœ‰æå¤§çš„è€å¿ƒ...")

# åˆå§‹åŒ–è®¡æ•°å™¨å’Œè®¡æ—¶å™¨
count = 0
start_time = time.time()

# å¼€å§‹æ— é™å¾ªç¯
while True:
    # 1. ç”Ÿæˆä¸€ä¸ªé«˜åº¦å…¼å®¹çš„12è¯åŠ©è®°è¯
    words = mnemo.generate(strength=128)
    
    # 2. ä»åŠ©è®°è¯ç”Ÿæˆç§å­ (è¿™æ˜¯æ‰€æœ‰æ´¾ç”Ÿçš„åŸºç¡€)
    seed_bytes = Bip39SeedGenerator(words).Generate()

    # 3. æ´¾ç”Ÿä»¥å¤ªåŠé’±åŒ… (è·¯å¾„: m/44'/60'/0'/0/0)
    bip44_eth_mst = Bip44.FromSeed(seed_bytes, Bip44Coins.ETHEREUM)
    bip44_eth_acc = bip44_eth_mst.Purpose().Coin().Account(0).Change(Bip44Changes.CHAIN_EXT).AddressIndex(0)
    eth_address = bip44_eth_acc.PublicKey().ToAddress()
    
    # 4. æ´¾ç”Ÿæ³¢åœºé’±åŒ… (è·¯å¾„: m/44'/195'/0'/0/0)
    bip44_tron_mst = Bip44.FromSeed(seed_bytes, Bip44Coins.TRON)
    bip44_tron_acc = bip44_tron_mst.Purpose().Coin().Account(0).Change(Bip44Changes.CHAIN_EXT).AddressIndex(0)
    tron_address = bip44_tron_acc.PublicKey().ToAddress()

    # 5. ã€æ ¸å¿ƒã€‘åŒæ—¶æ£€æŸ¥ä¸¤ä¸ªåœ°å€æ˜¯å¦éƒ½æ»¡è¶³æ¡ä»¶
    if eth_address.lower().startswith(eth_vanity_prefix) and tron_address.startswith(tron_vanity_prefix):
        # å¦‚æœä¸¤ä¸ªéƒ½æ‰¾åˆ°äº†ï¼
        end_time = time.time()
        
        # è·å–ç§é’¥
        eth_private_key = bip44_eth_acc.PrivateKey().Raw().ToHex()
        tron_private_key = bip44_tron_acc.PrivateKey().Raw().ToHex()

        print("\n\nğŸ‰ğŸ‰ğŸ‰ è¶…çº§å¹¸è¿æ˜Ÿï¼æ‰¾åˆ°äº†åŒæ—¶æ»¡è¶³ä¸¤ä¸ªå¸ç§çš„é“å·åŠ©è®°è¯ï¼ğŸ‰ğŸ‰ğŸ‰")
        print("-" * 60)
        print(f"ğŸ”‘ åŠ©è®°è¯ (Mnemonic): {words}")
        print("-" * 60)
        print(f"ğŸ’¼ ä»¥å¤ªåŠ (EVM) é“å·åœ°å€: {eth_address}")
        print(f"ğŸ” ä»¥å¤ªåŠ (EVM) ç§é’¥: 0x{eth_private_key}")
        print("-" * 60)
        print(f"ğŸ’¼ æ³¢åœº (TRON) é“å·åœ°å€: {tron_address}")
        print(f"ğŸ” æ³¢åœº (TRON) ç§é’¥: {tron_private_key}") # æ³¢åœºç§é’¥é€šå¸¸ä¸å¸¦0x
        print("-" * 60)
        print(f"æ€»å…±å°è¯•äº† {count+1} æ¬¡, è€—æ—¶ {end_time - start_time:.2f} ç§’ã€‚")
        
        # åœæ­¢å¾ªç¯
        break
        
    # æ‰“å°çŠ¶æ€
    count += 1
    if count % 1000 == 0:
        elapsed_time = time.time() - start_time
        hashes_per_second = count / elapsed_time if elapsed_time > 0 else 0
        print(f"\rå·²å°è¯• {count} æ¬¡... å½“å‰é€Ÿåº¦: {hashes_per_second:.0f} æ¬¡/ç§’", end="")
